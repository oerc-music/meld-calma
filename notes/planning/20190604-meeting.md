Meeting to progress integration of MELD and CALMA.

Oxford, 04-Jun-2019, 11:00, TW, JPNP, GK


These notes:
- https://github.com/oerc-music/meld-calma/blob/master/notes/planning/20190522-meeting.md

Previous meetings:
- [2019-05-14](https://github.com/oerc-music/meld-calma/blob/master/notes/planning/20190522-meeting.md)


# Agent software using Solid

@@status?

<!-- from last meeting:

Focus on song-to-signal agent and wrapping up past loose ends.

JP: push ahead with SOFA wrapping up

TW: push ahead with song-to-signal agent

GK: more planning?  Plan to design other agents on 4 June?  meld-tool enhancements?  Test cases for recording-to-song agent?

(Mentioned possibility of going to london to get Johan started)
-->

# Data modelling

## Connecting recordings to works

See: [2019-05-14](https://github.com/oerc-music/meld-calma/blob/master/notes/planning/20190522-meeting.md)

## Number-of-occurrences agent:

See: [2019-05-14](https://github.com/oerc-music/meld-calma/blob/master/notes/planning/20190522-meeting.md)

## Similar-occurrences-agent:

@@@@TODO

## Next steps

@@@TODO

# Progress review: proposed Agenda

1. Agenda bashing; set date next meeting

Next meeting/telecon: ??? 2019-06-11, 12 or 18?

(Also note Oxford meeting dates] booked for discussion of SOFA agents with Johan:
4 June (Oxford))

2. Review actions

3. TW review: last period, next actions, blockers

4. JP review: last period, next actions, blockers

5. GK review: last period, next actions, blockers

6. Review Thomas's agent

E.g.,

    python song-to-singal.py Mogwai "Acid Food"

Env CONTAINER has URI of Solid container, defaults to https://localhost:8443/public/

Question: is there a way to SPARQL-query for case-insensitive sonbg titles?

    1. pull all titles for artist, and use SPARQL filters
    2. Etree uses Virtuoso, which may have a text search option

Question: how to test if it already exists?

    1. to find given song (artist, title) - need to



7. Discuss architecture for accessing CALMA features




# Actions brought forward

ACTION TW: bring backup disk for CALMA to 4 June meeting

ACTION JP: update TW's script to write to LDP (this was mostly completed during the last meeting, but still needs to be run against the etree data)

ACTION JP: send solid server details to TW (Docker-based + README) (I got the impression this was now done.  JP?)

ACTION GK: (maybe later) test case for script writing to LDP (now unblocked?)


# TW review

## Previous

- push ahead with song-to-signal agent.
    - have something; will review in this meeting
    - 

- reviewed John's code from last meeting, used that pattern

- Think about getting actual CALMA features.
    - some investigation performed; no actual implementation yet
    - (need to agree: what to extract, data model, then implement)
    - Some thoughts, no details yet.  Plan to discuss architecture today

- CALMA backup disk?
    - delayed on getting approval
    - will send the disk when available

## Next

- review agent code (today)

- discuss CALMA feature extraction

- continue with what is started


## Blockers

- No blockers.  May need input from JP/GK as development proceeds.


# JPNP review

## Plan/roadmap

- Finish up Solid dockerization documentation (***DONE***)
    - See: https://github.com/oerc-music/sofa-docker (README - script is tested)
    - (Documentation formatting could be tidied upo a little)
    - (Installed with Uni cert, but process for setting up is not yet documented in README)

- Investigate how agents can be automatically triggered:  is this important?
    - SOme inverstigation: Solid offers update notifications via a WebSockets interface
    - No development activity yet

- CALMA server backups (TW should be bringing a backup disk on 4 June)

- Finish off outsanding items for SOFA 
    - https://github.com/oerc-music/nin-remixer-public/blob/master/notes/meetings/2019-03-26-meeting.md

    - complete testing of changes for load/save, then push to GitHub
        - not yet in running version

    - demo setup improvements
        - pull Mat's changes into docker image for NiN (including add HOWTO in documentation)
        - test NiN data auto-generation
        - generate larger test data set, and incorporate that into demo setup
            - have a better dataset; in demo setup
            - would still like to have a larger dataset (e.g. 100 more fragments)

    - command line tooling to merge fragment sets [JP6], (as update to MELD CLI tools [GK5])
        - held for some pair activity with GK on meld-tool

    - Finish off MEI output
        - for later

## Previous

Much time spent setting stuff up for David Lewis' training course.  Using Solid interface to tweak data.  Needed to add "refresh" button to re-run the match agents.  Regenerated 20 sets of data in a Solid server (fragments and fragment references, etc.).  Beefed up virtual machine capacity, was able to scale up agent activity.

Wrote node tool for recursive delete.  Maybe plan pair-programmiung session to incorporate this into meld-tool.

Tweaks to SOFA interface to expose more URIs (e.g. fragment URIs).

Have more useful collection of fragments.

(GK: it occurs to me that once the SOFA app is settled, we could start looking at optimizations for performance of the agent model.  Maybe also follow up links with Inrupt delelopment of an enterprise frade Solid server andtry that for performance?)

## Next

Refocus on original SOFA plan.

Mainly:

- hacking on MELD tool

- demo setup improvements


## Blockers

- Pair work with GK on meld-tool


# GK review

## Previous/plan

- Help TW as required with LDP and meld-cli-tool investigations
    - No contact

- Create initial testing framework for data created at the interface between CALMA/etree exports and SOFA agents
    - No progress - am kind-of waiting for agent to be complete

- Plan to design other agents on 4 June?
    - Identify agents
    - Design data models to be created
    - Design test data and procedure

- Add features to meld-cli-tool as they may be required
    - Nothing raised

- Possible medl-cli-tool refactoring
    - No activity

## Next

- Look at Solid notifications via WebSockets; also node.js websockets library
- Think aboiut meld-tool options to use this

## Blockers

- Not strictly a blocker, but waiting for initial agent implementation to create initial test suite; e.g. how to actually run the agent withion a test setup?


# Song-to-signal agent

We reviewed the data model, and concluded that we need spome additional structure to allow us to associate artist resources with artist names.

Proposed, then, is:

    /public

      /artists_songs
        /Mogwai_xyz
          /song_xyz.ttl
            <> a mc:Song (?)
              rdfs:label "Acid Food by Mogwai"
              mc:song_name "Acid Food"
              mc:artist_name "Mogwai"
              .
         :

      /song_to_recording
        /song_annotation_xyz.ttl
          <> a oa:Annotation
            oa:target <song_xyz.ttl>
            oa:body <etree_recording_id>
            .

      /artist_name_to_id
        /artist_annotation_xyz.ttl
          <> a oa:Annotation
            oa:target <...artists_songs/Mogwai_xyz>
            oa:body   [ mc:artist_name "Mogwai" ]    <-- body is bnode??
            .

And maybe later...

      /song_name_to_id
        /song_annotation_xyz.ttl
          <> a oa:Annotation
            oa:target <...artists_songs/Mogwai_xyz/song_xyz.ttl...>
            oa:body   [ mc:song_name "Acid Food", "acid food", "AcidFood", etc. ]
            .


Otherwise, there seems to be good progress on the agent.


# Further discussion

To discuss:

- [x] bigger picture and directions for remixer
    - (see whiteboard image)

- [ ] architecture for accessing CALMA features
    - notes from 2018-07-30 meeting last year
        - https://docs.google.com/document/d/1JTr5Q7lf6wh-vMsCQvGpG-CXlWjdciaprHjyB5fYA-4/edit

    - Example for querying data on Solid server

- [ ] Thomas: queries want to be limited to CALMA data

- [ ] {coding bits}


# Further agents


## Number of occurrences agent

Create a conbtainer of annotations that target songs, and record a count of recordings available for each song.


## Song selection agent

Uses tha number of occurrences amnmotations to create new working sets for songs that satisfy the >=100 recordings criteria


## Key distribution per recording agent

For a given song-working-set (created by Song selection agent), accesses the CALMA data for each recording and writes an annotation for each recording describing the key detection information (containing detected keys and duration within recording).


## Similar occurrences agent

For all recordings, compute an "average" key distribution across all recordings of a given song (workset), and crearte a per-song annotation recording this.  Then for each recording, calculate a "key typicality" measure that represents deviatiuon from average key distribution of that recording, and create a per-recording annotation for this.

Also, add a record of the annmotation comntainer to a "feature index" container (to allow selection of alternative features for typicality displays).


## SOFA display client

Allow selection of a feature (initially just key tyopiucality), and read the corresponding typicality annotations and use these to create a 






